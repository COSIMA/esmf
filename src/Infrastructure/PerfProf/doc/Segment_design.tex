% $Id: Segment_design.tex,v 1.3.14.3 2007/10/18 02:43:03 cdeluca Exp $
%
% Earth System Modeling Framework
% Copyright 2002-2007, University Corporation for Atmospheric Research, 
% Massachusetts Institute of Technology, Geophysical Fluid Dynamics 
% Laboratory, University of Michigan, National Centers for Environmental 
% Prediction, Los Alamos National Laboratory, Argonne National Laboratory, 
% NASA Goddard Space Flight Center.
% Licensed under the University of Illinois-NCSA License.

%\subsection{Design}

The Segment object has five main methods: SegmentCreate, SegmentBegin, SegmentEnd,
SegmentGetTime, and SegmentDestroy. SegmentCreate initializes values and
allocates memory for the maximum number of threads for an array of HWMonitor and Timer
objects. SegmentBegin, then queries the thread being used and prepares
monitoring for that given thread. SegmentEnd, again queries which thread is
being used and ends monitoring for that thread. SegmentGetTime figures out and
prints the timing statistics across all threads as well as distributed memory
tasks. Finally, SegmentDestroy, deallocates memory for the HWMonitor and
Timer arrays used in Segment.

More information on SegmentBegin. SegmentBegin detects which thread is being
used and accesses the HWMonitor and Timer for that thread. If the number
of threads was increased since the HWMonitor and Timer arrays were created
SegmentBegin will increase the memory needed to the new maximum number of
threads.

More information on SegmentEnd. Like SegmentBegin, SegmentEnd detects which
thread is being used. If it finds that the thread number exceeds the maximum
an error is triggered. Also if the given thread wasn't activated it will 
print a warning and continue.
