#  $Id: link_rules,v 1.1.8.1 2006/08/16 20:09:13 theurich Exp $
#
#  link_rules
#

The following commands show how to link a Fortran90 application with the ESMF 
shared libraries on Linux. In the command, the Fortran90 application is 
called "myModel".

It is assumed that the ESMF libraries have been built successfully at ESMF_DIR 
with the following environment variables:
ESMF_OS = Linux
ESMF_COMPILER = intel
ESMF_ABI = 64 or 32
ESMF_SITE = default
ESMF_COMM = lam or mpich
ESMF_BOPT = g or O

To simplify the link rules, first define MODDIR and LIBDIR.

For 64-bit addressing:

MODDIR = ${ESMF_DIR}/mod/mod${ESMF_BOPT}/Linux.intel.64.default
LIBDIR = ${ESMF_DIR}/lib/lib${ESMF_BOPT}/Linux.intel.64.default

For 32-bit addressing:

MODDIR = ${ESMF_DIR}/mod/mod${ESMF_BOPT}/Linux.intel.32.default
LIBDIR = ${ESMF_DIR}/lib/lib${ESMF_BOPT}/Linux.intel.32.default


The link rules are:

For 64-bit addressing and ESMF_COMM = lam:

efc -size_lp64 -mp -L${LIBDIR} -o myModel myModel.F90 -I${MODDIR} -lesmf -lcprts -lmpi -llam -lpthread

For 32-bit addressing and ESMF_COMM = mpich:

mpif90 -mp -L${LIBDIR} -o myModel myModel.F90 -I${MODDIR} -lesmf -lcprts -lmpich -lpthread
